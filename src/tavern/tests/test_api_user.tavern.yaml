test_name: Test user API

strict: False

marks:
  - usefixtures:
      - access_token

stages:
  - name: Get user unauthenticated
    request:
      url: "{tavern.env_vars.PROJECT_API_HOST}/auth/user/"
      verify: false
      method: GET
    response:
      status_code: 401

  - name: Get user
    request:
      url: "{tavern.env_vars.PROJECT_API_HOST}/auth/user/"
      verify: false
      method: GET
      headers:
        Authorization: "Bearer {access_token:s}"
    response:
      status_code: 200
      json:
        username: "{test_username:s}"
        email: "{test_email:s}"
        settings:
          time_zone: America/Chicago
          default_view: 0
          week_starts_on: 0
          show_getting_started: true
          default_reminder_offset: 30
          default_reminder_offset_type: 0
          default_reminder_type: 0
